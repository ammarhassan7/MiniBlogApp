<div class="hero-section text-white rounded-3 mb-5 p-5 shadow-lg position-relative overflow-hidden">
  <div class="position-relative z-1 text-center">
    <h1 class="display-4 fw-bold mb-3">Welcome to the Community</h1>
    <p class="lead mb-4 opacity-75">Discover stories, thinking, and expertise from writers on any topic.</p>

    <% if user_signed_in? %>
      <%= link_to new_post_path, class: "btn btn-light btn-lg rounded-pill px-5 fw-bold text-primary shadow hover-lift" do %>
        <i class="fas fa-pen-nib me-2"></i> Start Writing
      <% end %>
    <% else %>
      <%= link_to new_user_session_path, class: "btn btn-outline-light btn-lg rounded-pill px-5 fw-bold hover-lift" do %>
        Start Reading
      <% end %>
    <% end %>
  </div>

  <div class="decorative-circle"></div>
</div>

<div class="container">
  <% if @posts.any? %>

    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4 class="fw-bold text-dark border-start border-4 border-primary ps-3">Latest Stories</h4>

      <span class="text-muted small">
        <%= page_entries_info @posts, entry_name: 'story' %>
      </span>
    </div>

    <div class="row g-4">
      <% @posts.each do |post| %>
        <div class="col-md-6 col-lg-4">

          <div class="card h-100 border-0 shadow-sm hover-card rounded-4 overflow-hidden">
            <div class="card-body d-flex flex-column p-4">

              <div class="d-flex align-items-center mb-3">
                <div class="avatar-small me-2 bg-primary text-white">
                  <%= post.user.email.first.upcase %>
                </div>
                <div>
                  <h6 class="mb-0 text-dark fw-bold" style="font-size: 0.9rem;">
                    <%= post.user.email.split('@')[0].capitalize %>
                  </h6>
                  <small class="text-muted" style="font-size: 0.75rem;">
                    <%= time_ago_in_words(post.created_at) %> ago
                  </small>
                </div>
              </div>

              <h5 class="card-title fw-bold mb-3">
                <%= link_to post.title, post, class: "text-decoration-none text-dark stretched-link" %>
              </h5>

              <p class="card-text text-secondary flex-grow-1" style="font-size: 0.95rem; line-height: 1.6;">
                <%= truncate(post.body, length: 100, separator: ' ') %>
              </p>

              <div class="mt-3 pt-3 border-top d-flex justify-content-between align-items-center text-muted small">
                <span><i class="far fa-clock me-1"></i> <%= (post.body.split.size / 200.0).ceil %> min read</span>
                <span><i class="far fa-comment me-1"></i> <%= post.comments.count %></span>
              </div>

            </div>
          </div>

        </div>
      <% end %>
    </div>

    <div class="d-flex justify-content-center mt-5 mb-5 custom-pagination">
      <%= paginate @posts %>
    </div>

    </div> </div> <% else %>
    <div class="text-center py-5">
      <div class="mb-3 text-muted opacity-25">
        <i class="fas fa-newspaper fa-5x"></i>
      </div>
      <h3 class="fw-bold text-secondary">No stories yet</h3>
      <p class="text-muted">Be the first to share your thoughts with the world.</p>
    </div>
  <% end %>
  </div>

  <style>

      .custom-pagination .pagination {
          gap: 8px;
          align-items: center;
      }



      .custom-pagination .page-link {
          border-radius: 30px !important;
          min-width: 45px;
          height: 45px;
          padding: 0 15px;


          display: flex;
          align-items: center;
          justify-content: center;
          border: none;
          background-color: white;
          color: #6c757d;
          font-weight: 600;
          box-shadow: 0 2px 6px rgba(0,0,0,0.08);
          transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
          margin: 0;
      }


      .custom-pagination .page-link:hover {
          background-color: #fff;
          color: #764ba2;
          transform: translateY(-3px);
          box-shadow: 0 8px 15px rgba(0,0,0,0.1);
      }


      .custom-pagination .page-item.active .page-link {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          box-shadow: 0 4px 12px rgba(118, 75, 162, 0.5);
          transform: scale(1.1);
          z-index: 2;
      }


      .custom-pagination .page-link:focus {
          box-shadow: none;
      }


      .hero-section {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 300px;
          display: flex;
          align-items: center;
          justify-content: center;
      }
      .decorative-circle {
          position: absolute;
          top: -50%;
          right: -10%;
          width: 300px;
          height: 300px;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 50%;
          filter: blur(40px);
      }
      .hover-card {
          transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .hover-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 1rem 2rem rgba(0,0,0,.08)!important;
      }
      .hover-lift:hover {
          transform: translateY(-2px);
      }
      .avatar-small {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          display: flex;
          justify-content: center;
          align-items: center;
          font-size: 1rem;
          font-weight: bold;
      }
  </style>